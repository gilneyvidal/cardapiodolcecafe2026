<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Card√°pio Dolce DC Caf√©</title>
    <style>
        /*
        * Estilos para o card√°pio da Dolce DC Caf√©.
        * ATUALIZA√á√ÉO v5: Paleta Clean/Light Mode conforme PDF.
        * Base: Cimento Queimado Claro + Branco Quente.
        * Acentos: Terracota Suave (substituindo o laranja).
        */

        @font-face {
        font-family: "Dolato";
        src: url("fonts/Dolato de Stato Font.ttf") format("truetype");
        font-weight: normal;
        font-style: normal;
        }

        /* Vari√°veis CSS Atualizadas para a Nova Identidade Visual */
        :root {
        /* Base: Cimento queimado claro (Fundo da p√°gina) */
        --background-color: #e8e6e1; 
        
        /* Branco Quente (Fundo do Card√°pio) */
        --card-bg: #faf9f6; 

        /* Terracota Suave (Cor principal de destaque, substitui o antigo laranja) */
        --orange: #c47f68; 
        
        /* Terracota Escuro (Para hovers e contrastes) */
        --orange-dark: #a85f49; 

        /* Texto: Marrom Madeira/Caf√© Escuro (Para contraste no fundo claro) */
        --text-color: #4a3b2a;
        
        /* Texto Secund√°rio (Cinza para descri√ß√µes) */
        --text-secondary: #666666;
        }

        body {
        margin: 0;
        padding: 0;
        font-family: "Calibri", Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        }

        /*
        * Envolt√≥rio que circunda o cabe√ßalho e o card√°pio.
        * Fundo alterado para Branco Quente.
        * Borda alterada para Terracota.
        */
        .menu-wrapper {
        position: relative;
        border: 5px solid var(--orange);
        border-radius: 16px;
        padding: 30px 25px 40px;
        background-color: var(--card-bg);
        margin-bottom: 40px;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15); /* Sombra suavizada para o tema clean */
        }

        /* Ajustes no cabe√ßalho dentro do envolt√≥rio */
        .menu-wrapper header {
        text-align: center;
        margin-bottom: 30px;
        position: relative;
        }

        /* Linha com setas e t√≠tulo do card√°pio */
        .title-row {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-bottom: 10px;
        }

        /* Imagem do t√≠tulo "Card√°pio". 
        * Filtro ajustado para transformar branco/cor original em Terracota */
        .cardapio-img {
        height: 60px;
        width: auto;
        filter: invert(55%) sepia(26%) saturate(1008%) hue-rotate(325deg) brightness(94%) contrast(88%);
        }

        /* Setas esquerda e direita */
        .arrow-left,
        .arrow-right {
        flex: 1;
        height: 24px;
        width: 100%;
        object-fit: fill;
        max-width: 100%;
        }

        /* T√≠tulo principal do card√°pio (script) 
        * Cor ajustada para o texto escuro ou terracota */
        .menu-title {
        font-family: "Dolato", "Calibri", sans-serif;
        font-size: 2.5rem;
        color: var(--orange-dark); /* Destaque no t√≠tulo */
        margin: 0;
        margin-bottom: 10px;
        }

        /* Linha superior com a logo central e √≠cone decorativo √† direita */
        .header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 10px;
        margin-bottom: 20px;
        position: relative;
        }

        .header-left,
        .header-right {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        }

        .header-center {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        }

        header {
        margin-bottom: 0;
        }

        /* Ajuste de cores para o √≠cone decorativo (Terracota) */
        .decor-icon {
        width: 120px;
        height: auto;
        filter: invert(55%) sepia(26%) saturate(1008%) hue-rotate(325deg) brightness(94%) contrast(88%);
        }

        .menu {
        display: flex;
        flex-wrap: wrap;
        }

        .menu-col {
        flex: 1;
        min-width: 280px;
        padding: 0 20px;
        }

        /* Linha vertical terracota entre as colunas */
        .menu-col:not(:first-child) {
        border-left: 2px solid var(--orange);
        }

        .category-block {
        margin-bottom: 40px;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 0.6s ease forwards;
        }

        /* Cabe√ßalho da categoria: Terracota */
        .category-block h3 {
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "Dolato", "Calibri", sans-serif;
        font-size: 1.4rem;
        margin-top: 0;
        margin-bottom: 12px;
        color: var(--orange); /* Alterado de #fff para Terracota */
        }

        /* √çcone da categoria: Terracota */
        .category-block .category-icon {
        width: 32px;
        height: auto;
        filter: invert(55%) sepia(26%) saturate(1008%) hue-rotate(325deg) brightness(94%) contrast(88%);
        }

        .category-block .category-items {
        margin-top: 0;
        }

        /* Linha de item */
        .category-block .menu-row {
        display: grid;
        grid-template-columns: 2fr auto 40px auto;
        align-items: center;
        column-gap: 16px;
        padding: 5px 0;
        border-bottom: 1px dotted var(--orange);
        color: var(--text-color); /* Alterado de #fff para cor de texto escura */
        }

        .category-block .menu-row:last-child {
        border-bottom: none;
        }

        .category-block .menu-row span {
        font-size: 0.95rem;
        color: var(--text-color); /* Alterado de #fff para cor de texto escura */
        }

        .category-block .menu-row input[type="number"] {
        width: 55px;
        padding: 4px;
        font-size: 0.9rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        }

        /* Atrasos da anima√ß√£o */
        .category-block:nth-of-type(1) { animation-delay: 0s; }
        .category-block:nth-of-type(2) { animation-delay: 0.1s; }
        .category-block:nth-of-type(3) { animation-delay: 0.2s; }
        .category-block:nth-of-type(4) { animation-delay: 0.3s; }
        .category-block:nth-of-type(5) { animation-delay: 0.4s; }
        .category-block:nth-of-type(6) { animation-delay: 0.5s; }

        @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
        }

        /* Footer */
        .footer {
        text-align: center;
        color: var(--text-color); /* Alterado de #fff para escuro */
        font-size: 0.9rem;
        margin-top: 30px;
        }

        .footer a {
        color: var(--orange);
        text-decoration: none;
        }
        .footer a:hover {
        text-decoration: underline;
        color: var(--orange-dark);
        }

        /* Mensagem informativa */
        .info-message {
        background-color: #fdfdfd;
        border-left: 4px solid var(--orange);
        padding: 12px 16px;
        margin-bottom: 20px;
        color: var(--text-color);
        font-size: 0.9rem;
        line-height: 1.4;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* * =========================================
         * NOVO ESTILO: CARRINHO FLUTUANTE (MODAL)
         * =========================================
         */

        /* Bot√£o flutuante do carrinho */
        .cart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--orange);
            color: #fff; 
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            z-index: 1000; /* Abaixo do modal, acima do conte√∫do */
            transition: transform 0.2s ease, background-color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
        }
        .cart-button:hover {
            background-color: var(--orange-dark);
            transform: scale(1.05);
        }

        /* Fundo escuro do modal */
        .cart-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6); /* Fundo escuro semi-transparente */
            z-index: 2000; /* Acima de tudo */
            display: none; /* Controlado via JS (flex quando ativo) */
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            backdrop-filter: blur(3px);
        }

        /* Janela do modal (conte√∫do) */
        .cart-modal-content {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 500px;
            max-height: 90vh; /* M√°ximo 90% da altura da tela */
            border-radius: 12px;
            border: 2px solid var(--orange);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            position: relative;
            animation: modalPopUp 0.3s ease-out;
            overflow: hidden;
        }

        @keyframes modalPopUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Cabe√ßalho do Modal (T√≠tulo + Bot√£o Fechar) */
        .cart-modal-header {
            padding: 15px 20px;
            background-color: var(--orange);
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-modal-header h2 {
            margin: 0;
            font-family: "Dolato", "Calibri", sans-serif;
            font-size: 1.4rem;
        }

        .close-modal-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 2rem;
            line-height: 1;
            cursor: pointer;
            padding: 0;
        }
        .close-modal-btn:hover {
            color: #eee;
        }

        /* Corpo rol√°vel do modal */
        .cart-modal-body {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }

        /* Ajustes internos para o formul√°rio e lista dentro do modal */
        .cart-section, .order-form {
            margin-top: 0;
            border: none;
            box-shadow: none;
            padding: 0;
            background: transparent;
            max-width: 100%;
        }
        
        /* Removemos os t√≠tulos H2 originais de dentro das se√ß√µes pois temos o header do modal */
        .cart-section h2, .order-form h2 {
            display: none;
        }

        .order-form {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed var(--orange);
        }

        /* Indicador de quantidade ao lado do bot√£o + */
        .qty-indicator {
        font-size: 0.9rem;
        color: var(--orange); /* Alterado para Terracota para destaque no fundo branco */
        font-weight: bold;
        margin-left: 4px;
        }

        .header-separator {
        border-top: 2px solid var(--orange);
        margin: 20px 0 10px;
        }

        .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 20px;
        }

        /* Estilos decorativos */
        .decor-image {
        width: 80px;
        height: auto;
        margin: 5px;
        display: block;
        /* Filtro Terracota */
        filter: invert(55%) sepia(26%) saturate(1008%) hue-rotate(325deg) brightness(94%) contrast(88%);
        }

        .decor-middle {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 20px 0;
        }

        .decor-bottom {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        }

        .decor-bottom .decor-image {
        width: 100px;
        }

        .topo-img {
        display: block;
        width: 100%;
        height: auto;
        margin: 0 auto 20px;
        }

        /* Carrinho itens */
        .cart-items {
        display: flex;
        flex-direction: column;
        gap: 8px;
        }
        .cart-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        font-size: 0.95rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 8px;
        margin-bottom: 8px;
        }
        .cart-item:last-child {
            border-bottom: none;
        }
        .cart-item-name { flex: 2; font-weight: 500;}
        .cart-item-price { flex: 1; text-align: right; }
        .cart-item-controls {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 5px;
        }
        .cart-item-controls button {
        width: 28px;
        height: 28px;
        border: 1px solid var(--orange);
        background-color: var(--orange);
        color: #fff;
        font-weight: bold;
        border-radius: 4px;
        cursor: pointer;
        }
        .cart-total {
        font-weight: bold;
        text-align: right;
        margin-top: 15px;
        font-size: 1.2rem;
        color: var(--orange-dark);
        }

        /* Bot√£o Adicionar */
        .add-btn {
        width: 32px;
        height: 28px;
        border: 1px solid var(--orange);
        background-color: var(--orange);
        color: #fff;
        font-size: 1rem;
        border-radius: 4px;
        cursor: pointer;
        text-align: center;
        padding: 0;
        }
        .add-btn:hover {
        background-color: var(--orange-dark);
        }

        /* Responsividade */
        @media (max-width: 900px) {
        .menu {
            flex-direction: column;
        }
        .menu-col {
            min-width: 100%;
            padding: 0 12px;
            border-left: none;
            border-top: 2px solid var(--orange);
            margin-top: 20px;
            box-sizing: border-box;
        }
        .menu-col:first-child {
            border-top: none;
            margin-top: 0;
        }
        .category-block h3 {
            font-size: 1.2rem;
        }
        .category-block .menu-row,
        .category-column .menu-row {
            grid-template-columns: 2fr auto 40px auto;
            column-gap: 14px;
        }
        .container {
            padding: 10px;
        }
        .menu-wrapper {
            padding: 20px 15px;
        }
        .cart-button {
            padding: 12px 20px;
            font-size: 0.9rem;
        }
        }

        .form-group {
        margin-bottom: 15px;
        }

        .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 0.9rem;
        }

        .form-group input,
        .form-group select {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        border: 1px solid #ccc; /* Bordas suaves */
        border-radius: 4px;
        font-size: 1rem;
        background-color: #fff;
        color: var(--text-color);
        }

        button[type="submit"] {
        display: block;
        width: 100%;
        background-color: var(--orange);
        color: #fff;
        border: none;
        padding: 15px 20px;
        font-size: 1.1rem;
        font-weight: bold;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-top: 20px;
        }

        button[type="submit"]:hover {
        background-color: var(--orange-dark);
        }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Envolt√≥rio que concentra o cabe√ßalho e o card√°pio -->
      <div class="menu-wrapper">
        <header>
          <!-- Imagem de topo -->
          <img src="images/topo.png" alt="Topo decorativo" class="topo-img" />
        </header>
        <!-- Linha divis√≥ria -->
        <div class="header-separator"></div>

        <!-- Mensagem informativa -->
        <div class="info-message">
          Clique no bot√£o <strong>‚Äú+‚Äù</strong> para adicionar um produto √† sua sacola. 
          Use o bot√£o <strong>"Ver Carrinho"</strong> para finalizar seu pedido.
        </div>

        <!-- Se√ß√£o do menu -->
        <section id="menu" class="menu">
          <!-- Conte√∫do gerado dinamicamente -->
        </section>
      </div>

      <!-- Footer -->
      <footer class="footer">
        <p>Dolce Caf√© | Ramal: 0830 | Hor√°rio: 6:00 √†s 23:00</p>
        <p>¬© 2025 Dolce Caf√©. Todos os direitos reservados.</p>
        <p>
          Desenvolvido pela empresa Vidal Design Solutions ‚Äì
          <a href="https://wa.me/5511968649673" target="_blank">11968649673</a>
        </p>
      </footer>
    </div>

    <!-- ESTRUTURA DO MODAL FLUTUANTE (CARRINHO) -->
    <div id="cartModal" class="cart-modal-overlay">
        <div class="cart-modal-content">
            <div class="cart-modal-header">
                <h2>Seu Carrinho</h2>
                <button id="closeCartBtn" class="close-modal-btn">&times;</button>
            </div>
            
            <div class="cart-modal-body">
                <!-- Se√ß√£o do carrinho (Conte√∫do) -->
                <section id="cart-section" class="cart-section">
                    <!-- T√≠tulo H2 removido via CSS pois est√° no header do modal -->
                    <h2>Carrinho</h2> 
                    <div id="cartItems"></div>
                    <p class="cart-total">Total: R$ <span id="cartTotal">0,00</span></p>
                </section>

                <!-- Formul√°rio de pedido -->
                <section id="order-form" class="order-form">
                    <!-- T√≠tulo H2 removido via CSS -->
                    <h2>Fazer pedido</h2>
                    <form id="orderForm">
                        <div class="form-group">
                            <label for="customerName">Nome:</label>
                            <input type="text" id="customerName" required placeholder="Digite seu nome" />
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Telefone:</label>
                            <input type="tel" id="customerPhone" required placeholder="(11) 99999-9999" />
                        </div>
                        <div class="form-group">
                            <label for="customerRoom">Quarto:</label>
                            <input type="text" id="customerRoom" required placeholder="Ex: 104" />
                        </div>
                        <div class="form-group">
                            <label for="customerSector">Setor:</label>
                            <select id="customerSector" required></select>
                        </div>
                        <div class="form-group">
                            <label for="paymentMethod">Forma de pagamento:</label>
                            <select id="paymentMethod" required>
                                <option value="Dinheiro">Dinheiro</option>
                                <option value="Cart√£o de Cr√©dito">Cart√£o de cr√©dito</option>
                                <option value="Cart√£o de D√©bito">Cart√£o de d√©bito</option>
                                <option value="Pix">Pix</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="consumptionType">Servi√ßo:</label>
                            <select id="consumptionType" required>
                                <option value="Comer no local">Comer no local</option>
                                <option value="Retirar no balc√£o">Retirar no balc√£o</option>
                            </select>
                        </div>
                        <button type="submit">Enviar pedido via WhatsApp</button>
                    </form>
                </section>
            </div>
        </div>
    </div>

    <!-- Bot√£o flutuante -->
    <button id="cartButton" class="cart-button" style="display:none;">
        üõí Ver carrinho (<span id="cartCount">0</span>)
    </button>

    <script>
        //
        // Script respons√°vel pela l√≥gica do pedido: popular lista de setores do hospital,
        // capturar itens selecionados e montar uma mensagem formatada para envio via
        // WhatsApp.
        //

        document.addEventListener('DOMContentLoaded', () => {
        const menuData = [
            {
            name: 'Salgados',
            icon: 'salgado.png',
            items: [
                { name: 'Calzone', price: '9,50' },
                { name: 'Coxinha', price: '9,50' },
                { name: 'Croissnat (Pizza | 4 Queijos | Presunto e Queijo)', price: '9,50' },
                { name: 'Esfiha de Carne | Calabresa', price: '9,00' },
                { name: 'Hamburguer C/ Mussarela', price: '11,50' },
                { name: 'Kibe', price: '8,50' },
                { name: 'Pastel De Frango', price: '9,50' },
                { name: 'Pastel Int. Br√≥colis Ou Ricota', price: '10,00' },
                { name: 'P√£o De Batata', price: '8,00' },
                { name: 'Fohado De Presunto', price: '9,50' },
                { name: 'P√£o De Queijo', price: '5,00' },
                { name: 'Lanche Natural', price: '19,00' },
                { name: 'P√£o Franc√™s', price: '5,00' },
                { name: 'Mini Pizza', price: '12,50' },
                { name: 'Torta De Frango', price: '11,50' }
            ]
            },
            {
            name: 'Cafeteria',
            icon: 'xicara.png',
            items: [
                { name: 'Caf√©', price: '6,00' },
                { name: 'Cappuccino', price: '10,00' },
                { name: 'M√©dia', price: '8,50' },
                { name: 'Chocolate Quente', price: '10,00' },
                { name: 'Machiato', price: '6,50' }
            ]
            },
            {
            name: 'Bebidas',
            icon: 'xicara.png',
            items: [
                { name: '√Ågua De C√¥co', price: '7,00' },
                { name: '√Ågua S/ G√°s | C/ G√°s', price: '5,00' },
                { name: 'Refrigerantes', price: '7,50' },
                { name: 'Ch√° Gelado Ice Tea', price: '9,50' },
                { name: 'Gatorade', price: '10,50' },
                { name: 'Greem People', price: '15,00' },
                { name: 'Iogurte', price: '5,00' },
                { name: 'Suco Del Vale', price: '8,50' },
                { name: 'Todinho', price: '6,00' },
                { name: 'T√¥nica', price: '7,50' },
                { name: 'Mini Refri', price: '5,00' },
                { name: 'Ch√° Quente', price: '6,00' }
            ]
            },
            {
            name: 'Comidinhas',
            icon: 'esfiha.png',
            items: [
                { name: 'Comida Brasileito (Pratos Rapidos)', price: '27,50' },
                { name: 'Cremes', price: '26,50' },
                { name: 'Prato Vegetariano', price: '40,00' },
                { name: 'Tapioca B√°sica', price: '7,00' },
                { name: 'Ovo', price: '13,00' }
            ]
            },
            {
            name: 'Doces',
            icon: 'bolo fatia.png',
            items: [
                { name: 'Halls', price: '4,00' },
                { name: 'Trident', price: '4,00' },
                { name: 'Povilho', price: '8,00' },
                { name: 'Bis', price: '7,00' },
                { name: 'Pururuca', price: '5,00' },
                { name: 'Chocolate 34g', price: '6,00' },
                { name: 'Chocolate 90g', price: '13,50' },
                { name: 'Salgadinho 40g', price: '4,00' },
                { name: 'Baton', price: '3,00' },
                { name: 'Suflair', price: '8,50' },
                { name: 'Pa√ßoca', price: '1,20' },
                { name: 'Mix De Nuts', price: '17,00' },
                { name: 'Castanha', price: '17,00' },
                { name: 'Bolacha Recheada', price: '7,00' }
            ]
            },
            {
            name: 'Petit Four',
            icon: 'bolo decorado.png',
            items: [
                { name: 'Biscoito Petiti Four', price: '9,00' },
                { name: 'Jujuba', price: '7,00' },
                { name: 'Bolo Peda√ßo', price: '9,50' },
                { name: 'Torta Holandesa', price: '16,00' },
                { name: 'Bolo Festa', price: '16,00' },
                { name: 'Trufa', price: '5,50' },
                { name: 'Pirulito', price: '14,50' },
                { name: 'Tiramissu', price: '14,50' },
                { name: 'T. Morango E Ma√ß√£', price: '11,50' },
                { name: 'Quindim', price: '9,50' },
                { name: 'Donuts', price: '10,50' },
                { name: 'Salada De Frutas', price: '16,50' },
                { name: 'Frutas', price: '4,00' }
            ]
            },
            {
            name: 'Combo Promocional',
            icon: 'combo_promocional.png',
            items: [
                { name: 'Combo 1', price: '22,50', description: 'Pratos do dia (Feijoada)' },
                { name: 'Combo 2', price: '15,50', description: 'Cuscuz com ovo' },
                { name: 'Combo 3', price: '13,50', description: 'Torta de frango + mini refri' },
                { name: 'Combo 4', price: '18,50', description: 'Dolce Calabresa' },
                { name: 'Combo 5', price: '11,00', description: 'Caf√© com leite m√©dio + p√£o de queijo' },
                { name: 'Combo 6', price: '12,50', description: 'Cappuccino + p√£o de queijo' }
            ]
            }
        ];

        const sectors = [
            'Emerg√™ncia',
            'Trauma',
            'Queimados',
            'Cardiologia',
            'UTI (Terapia Intensiva)',
            'Neurologia',
            'Obstetr√≠cia e Ginecologia',
            'Oncologia',
            'Farm√°cia',
            'Patologia',
            'Radiologia'
        ];

        const cart = {};
        const qtyIndicators = {};

        // ELEMENTOS DO MODAL
        const cartModal = document.getElementById('cartModal');
        const closeCartBtn = document.getElementById('closeCartBtn');
        const cartButtonElem = document.getElementById('cartButton');

        // FUN√á√ïES DO MODAL
        function openCart() {
            cartModal.style.display = 'flex';
        }

        function closeCart() {
            cartModal.style.display = 'none';
        }

        // Event Listeners do Modal
        cartButtonElem.addEventListener('click', openCart);
        closeCartBtn.addEventListener('click', closeCart);
        
        // Fechar ao clicar fora da caixa do modal
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                closeCart();
            }
        });

        function updateIndicators() {
            Object.keys(qtyIndicators).forEach(name => {
            const span = qtyIndicators[name];
            span.textContent = cart[name] ? cart[name].quantity : '';
            });
            const cartCount = document.getElementById('cartCount');
            const totalItems = Object.values(cart).reduce((sum, e) => sum + e.quantity, 0);
            
            if (totalItems > 0) {
                cartButtonElem.style.display = 'flex'; // Exibe o bot√£o flutuante
                cartCount.textContent = totalItems;
            } else {
                cartButtonElem.style.display = 'none'; // Esconde se vazio
                cartCount.textContent = '0';
                // Se o carrinho esvaziar enquanto o modal est√° aberto, podemos optar por fechar ou n√£o.
                // Por enquanto, vamos manter aberto para que o usu√°rio veja que removeu tudo.
            }
        }

        function addToCart(itemName, itemPrice) {
            if (!cart[itemName]) cart[itemName] = { quantity: 1, price: itemPrice };
            else cart[itemName].quantity++;
            renderCart();
            updateIndicators();
        }

        function updateCart(itemName, delta) {
            if (!cart[itemName]) return;
            cart[itemName].quantity += delta;
            if (cart[itemName].quantity <= 0) delete cart[itemName];
            renderCart();
            updateIndicators();
        }

        function renderCart() {
            const cartSection = document.getElementById('cart-section');
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotalSpan = document.getElementById('cartTotal');
            cartItemsContainer.innerHTML = '';
            let total = 0;
            const names = Object.keys(cart);
            
            // L√≥gica antiga de display: none foi removida daqui, pois o modal controla a visibilidade.
            // Apenas renderizamos o conte√∫do se houver itens.
            
            if (names.length === 0) {
                cartItemsContainer.innerHTML = '<p style="text-align:center; padding: 20px;">Seu carrinho est√° vazio.</p>';
                cartTotalSpan.textContent = '0,00';
                return;
            }

            names.forEach(name => {
            const entry = cart[name];
            const priceNum = parseFloat(entry.price.replace(',', '.'));
            const itemTotal = priceNum * entry.quantity;
            total += itemTotal;

            const row = document.createElement('div');
            row.className = 'cart-item';

            const nameSpan = document.createElement('span');
            nameSpan.className = 'cart-item-name';
            nameSpan.textContent = name;

            const priceSpan = document.createElement('span');
            priceSpan.className = 'cart-item-price';
            priceSpan.textContent = `R$ ${entry.price}`;

            const controls = document.createElement('div');
            controls.className = 'cart-item-controls';
            const minusBtn = document.createElement('button');
            minusBtn.textContent = '‚àí';
            minusBtn.addEventListener('click', () => updateCart(name, -1));
            const qtySpan = document.createElement('span');
            qtySpan.textContent = entry.quantity;
            qtySpan.style.minWidth = '20px';
            qtySpan.style.textAlign = 'center';
            const plusBtn = document.createElement('button');
            plusBtn.textContent = '+';
            plusBtn.addEventListener('click', () => updateCart(name, 1));

            controls.appendChild(minusBtn);
            controls.appendChild(qtySpan);
            controls.appendChild(plusBtn);

            row.appendChild(nameSpan);
            row.appendChild(priceSpan);
            row.appendChild(controls);
            cartItemsContainer.appendChild(row);
            });
            const totalStr = total.toFixed(2).replace('.', ',');
            cartTotalSpan.textContent = totalStr;
        }

        function renderMenu() {
            const menuContainer = document.getElementById('menu');
            menuContainer.innerHTML = '';
            Object.keys(qtyIndicators).forEach(key => delete qtyIndicators[key]);

            const leftCol = document.createElement('div');
            leftCol.className = 'menu-col';

            const rightCol = document.createElement('div');
            rightCol.className = 'menu-col';

            menuData.forEach((category, index) => {
            const block = createCategoryBlock(category);
            if (block) {
                if (index % 2 === 0) {
                leftCol.appendChild(block);
                } else {
                rightCol.appendChild(block);
                if (category.name === 'Cafeteria') {
                    const midDecor = document.createElement('div');
                    midDecor.className = 'decor-middle';
                    const row1 = document.createElement('div');
                    const rocamboleImg = document.createElement('img');
                    rocamboleImg.src = 'images/rocambole.png';
                    rocamboleImg.alt = '';
                    rocamboleImg.className = 'decor-image';
                    const rosquinhaImg = document.createElement('img');
                    rosquinhaImg.src = 'images/rosquinha.png';
                    rosquinhaImg.alt = '';
                    rosquinhaImg.className = 'decor-image';
                    row1.appendChild(rocamboleImg);
                    row1.appendChild(rosquinhaImg);
                    row1.style.display = 'flex';
                    row1.style.justifyContent = 'center';
                    row1.style.gap = '20px';
                    midDecor.appendChild(row1);

                    const row2 = document.createElement('div');
                    const xicaraImg = document.createElement('img');
                    xicaraImg.src = 'images/xicara.png';
                    xicaraImg.alt = '';
                    xicaraImg.className = 'decor-image';
                    row2.appendChild(xicaraImg);
                    row2.style.display = 'flex';
                    row2.style.justifyContent = 'center';
                    row2.style.marginTop = '10px';
                    midDecor.appendChild(row2);
                    rightCol.appendChild(midDecor);
                }
                }
            }
            });

            function createCategoryBlock(category) {
            if (!category) return null;

            const block = document.createElement('div');
            block.className = 'category-block';

            const h3 = document.createElement('h3');
            const iconImg = document.createElement('img');
            iconImg.src = `images/${category.icon}`;
            iconImg.alt = '';
            iconImg.className = 'category-icon';
            const titleSpan = document.createElement('span');
            titleSpan.textContent = category.name;
            h3.appendChild(iconImg);
            h3.appendChild(titleSpan);
            block.appendChild(h3);

            const itemList = document.createElement('div');
            itemList.className = 'category-items';
            category.items.forEach(item => {
                const row = document.createElement('div');
                row.className = 'menu-row';

                const nameBox = document.createElement('div');
                const nameSpan = document.createElement('span');
                nameSpan.textContent = item.name;
                nameSpan.style.display = 'block';

                nameBox.appendChild(nameSpan);

                if (item.description) {
                const desc = document.createElement('small');
                desc.textContent = item.description;
                desc.style.display = 'block';
                desc.style.marginTop = '2px';
                desc.style.opacity = '0.9';
                desc.style.color = '#666'; 
                nameBox.appendChild(desc);
                }

                const priceSpan = document.createElement('span');
                priceSpan.textContent = `R$ ${item.price}`;

                const addBtn = document.createElement('button');
                addBtn.type = 'button';
                addBtn.textContent = '+';
                addBtn.className = 'add-btn';
                addBtn.addEventListener('click', () => addToCart(item.name, item.price));

                const qtySpan = document.createElement('span');
                qtySpan.className = 'qty-indicator';
                qtyIndicators[item.name] = qtySpan;

                row.appendChild(nameBox);
                row.appendChild(priceSpan);
                row.appendChild(addBtn);
                row.appendChild(qtySpan);
                itemList.appendChild(row);
            });
            block.appendChild(itemList);
            return block;
            }

            const leftBottomDecor = document.createElement('div');
            leftBottomDecor.className = 'decor-bottom';
            const saleiroImg = document.createElement('img');
            saleiroImg.src = 'images/saleiro.png';
            saleiroImg.alt = '';
            saleiroImg.className = 'decor-image';
            leftBottomDecor.appendChild(saleiroImg);
            leftCol.appendChild(leftBottomDecor);

            const rightBottomDecor = document.createElement('div');
            rightBottomDecor.className = 'decor-bottom';
            const tortaImg = document.createElement('img');
            tortaImg.src = 'images/torta doce.png';
            tortaImg.alt = '';
            tortaImg.className = 'decor-image';
            rightBottomDecor.appendChild(tortaImg);
            rightCol.appendChild(rightBottomDecor);

            menuContainer.appendChild(leftCol);
            menuContainer.appendChild(rightCol);
        }

        renderMenu();
        updateIndicators();

        const sectorSelect = document.getElementById('customerSector');
        sectors.forEach(sector => {
            const option = document.createElement('option');
            option.value = sector;
            option.textContent = sector;
            sectorSelect.appendChild(option);
        });

        function buildWhatsAppURL(number, text) {
            const encoded = encodeURIComponent(text);
            const isMobile = /Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent);
            return isMobile
            ? `https://wa.me/${number}?text=${encoded}`
            : `https://web.whatsapp.com/send?phone=${number}&text=${encoded}`;
        }

        const orderForm = document.getElementById('orderForm');
        orderForm.addEventListener('submit', event => {
            event.preventDefault();

            const orderLines = [];
            let totalOrder = 0;
            const names = Object.keys(cart);

            names.forEach(name => {
            const entry = cart[name];
            const qty = entry.quantity;
            const priceStr = entry.price;
            const priceNum = parseFloat(priceStr.replace(',', '.'));
            const itemTotal = priceNum * qty;
            totalOrder += itemTotal;
            const itemTotalStr = itemTotal.toFixed(2).replace('.', ',');
            orderLines.push(`${name}: ${qty} x R$ ${priceStr} = R$ ${itemTotalStr}`);
            });

            if (orderLines.length === 0) {
            alert('Selecione pelo menos um item do card√°pio.');
            return;
            }

            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            const customerRoom = document.getElementById('customerRoom').value.trim();
            const customerSector = document.getElementById('customerSector').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            const consumptionType = document.getElementById('consumptionType').value;

            const totalStr = totalOrder.toFixed(2).replace('.', ',');

            const message =
            `Ol√°, gostaria de fazer um pedido:\n\n` +
            `Itens selecionados:\n${orderLines.join('\n')}\n\n` +
            `Total do pedido: R$ ${totalStr}\n\n` +
            `Nome: ${customerName}\n` +
            `Telefone: ${customerPhone}\n` +
            `Quarto: ${customerRoom}\n` +
            `Setor: ${customerSector}\n` +
            `Forma de pagamento: ${paymentMethod}\n` +
            `Servi√ßo: ${consumptionType}`;

            const whatsappNumber = '5511918360016';
            const whatsappURL = buildWhatsAppURL(whatsappNumber, message);
            const win = window.open(whatsappURL, '_blank');
            if (!win) window.location.href = whatsappURL;
        });
        });
    </script>
  </body>
</html>
